<!-- –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é) -->
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        {% if unread_notifications_count > 0 %}
        <span class="notification-badge">{{ unread_notifications_count }}</span>
        {% endif %}
    </a>
    <ul class="dropdown-menu notification-dropdown">
        <li class="dropdown-header">
            <div class="d-flex justify-content-between align-items-center">
                <strong>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</strong>
                {% if unread_notifications_count > 0 %}
                <a href="{% url 'mark_all_read' %}" class="btn btn-sm btn-outline-secondary">
                    –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ
                </a>
                {% endif %}
            </div>
        </li>
        <li><hr class="dropdown-divider"></li>
        
        {% if recent_notifications %}
            {% for notification in recent_notifications %}
            <li>
                <a class="dropdown-item notification-item {% if not notification.is_read %}notification-unread{% endif %}" 
                   href="{{ notification.url|default:'#' }}" 
                   onclick="markAsRead({{ notification.id }})">
                    <div class="d-flex w-100 justify-content-between">
                        <strong class="mb-1">{{ notification.title }}</strong>
                        <small>{{ notification.created_at|timesince }} –Ω–∞–∑–∞–¥</small>
                    </div>
                    <p class="mb-1 small">{{ notification.message|truncatewords:10 }}</p>
                    {% if not notification.is_read %}
                    <span class="badge bg-primary">–ù–æ–≤–æ–µ</span>
                    {% endif %}
                </a>
            </li>
            {% if not forloop.last %}<li><hr class="dropdown-divider"></li>{% endif %}
            {% endfor %}
            
            <li><hr class="dropdown-divider"></li>
            <li>
                <a class="dropdown-item text-center" href="{% url 'notifications_page' %}">
                    <strong>–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</strong>
                </a>
            </li>
        {% else %}
            <li class="px-3 py-2 text-muted text-center">
                –ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            </li>
        {% endif %}
    </ul>
</li>