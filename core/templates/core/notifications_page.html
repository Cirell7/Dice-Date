{% extends "core/base1.html" %}
{% load static %}

{% block extra_style %}
<link rel="stylesheet" href="{% static 'core/css/base/notifications_page.css' %}" />
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'core/js/notifications_page.js' %}"defer></script>
{%endblock%}

{% block main %}

<div class="form-container">
    <div class="form-content">
        <div class="form-header">
            <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
            {% if unread_notifications_count > 0 %}
            <button onclick="markAllAsRead()" class="btn-primary">
                üì¨ –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ
            </button>
            {% endif %}
        </div>

        <div class="notifications-list">
            {% if notifications %}
                {% for notification in notifications %}
                <div class="notification-item {% if not notification.is_read %}unread{% endif %}" 
                     data-notification-id="{{ notification.id }}"
                     onclick="markAsReadAndNavigate({{ notification.id }})">
                    <div class="notification-content">
                        <div class="notification-text">{{ notification.message }}</div>
                        <div class="notification-time">{{ notification.created_at|timesince }} –Ω–∞–∑–∞–¥</div>
                    </div>
                    {% if not notification.is_read %}
                    <div class="unread-dot"></div>
                    {% endif %}
                </div>
                {% endfor %}
            {% else %}
                <div class="no-messages" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; height: 200px;">
                    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</p>
                    <a href="{% url 'post_list' %}" class="btn btn-primary">–ù–∞–π—Ç–∏ –≤—Å—Ç—Ä–µ—á–∏</a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}