<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç | VK-style</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'CSS/form.css' %}" />
</head>
<body>
    <form action="/" method="get">
    <div class="container">
        <div class="header">
            <div class="logo">VK</div>
            <div class="user-info">
                <div class="avatar">–ü–£</div>
                <div>–ü–æ–ª–∏–Ω–∞ –£—Ç–∫–∏–Ω–∞</div>
            </div>
        </div>
        
        <div class="post-form">
            <div class="post-header">
                <div class="post-title">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</div>
                <button class="close-btn">&times;</button>
            </div>
            
            <div class="textarea-container">
                <textarea class="post-textarea" placeholder=""></textarea>
                <div class="placeholder">–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?</div>
            </div>
            
            <div class="attachments-preview" id="attachmentsPreview">
                <!-- –ü—Ä–µview –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ -->
            </div>
            
            <div class="post-options">
                <button class="option-btn" id="addPhoto">
                    <i class="fas fa-camera"></i> –§–æ—Ç–æ
                </button>
                <button class="option-btn" id="addVideo">
                    <i class="fas fa-video"></i> –í–∏–¥–µ–æ
                </button>
                <button class="option-btn" id="addMusic">
                    <i class="fas fa-music"></i> –ú—É–∑—ã–∫–∞
                </button>
                <button class="option-btn" id="addFile">
                    <i class="fas fa-file"></i> –§–∞–π–ª
                </button>
                <button class="option-btn" id="addPoll">
                    <i class="fas fa-chart-bar"></i> –û–ø—Ä–æ—Å
                </button>
                <button class="option-btn" id="addEmoji">
                    <i class="far fa-smile"></i> –≠–º–æ–¥–∑–∏
                </button>
            </div>
            
            <div class="privacy-settings">
                <span>–í–∏–¥–∏–º–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏:</span>
                <div class="privacy-btn" id="privacyBtn">
                    <span>–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                
                <div class="privacy-menu" id="privacyMenu">
                    <div class="privacy-option">
                        <i class="fas fa-globe"></i> –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
                    </div>
                    <div class="privacy-option">
                        <i class="fas fa-users"></i> –¢–æ–ª—å–∫–æ –¥—Ä—É–∑—å—è
                    </div>
                    <div class="privacy-option">
                        <i class="fas fa-user-friends"></i> –î—Ä—É–∑—å—è –∏ –¥—Ä—É–∑—å—è –¥—Ä—É–∑–µ–π
                    </div>
                    <div class="privacy-option">
                        <i class="fas fa-lock"></i> –¢–æ–ª—å–∫–æ —è
                    </div>
                </div>
            </div>
            
            <div class="post-actions">
                <button class="cancel-btn">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                <button type="submit" id="publishBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            </div>
        </div>
    </div>
    
    </form>
    <p>{{data}}</p>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const textarea = document.querySelector('.post-textarea');
            const placeholder = document.querySelector('.placeholder');
            const publishBtn = document.getElementById('publishBtn');
            const privacyBtn = document.getElementById('privacyBtn');
            const privacyMenu = document.getElementById('privacyMenu');
            const attachmentsPreview = document.getElementById('attachmentsPreview');
            let attachments = [];
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º
            textarea.addEventListener('input', function() {
                if (this.value.trim() !== '' || attachments.length > 0) {
                    publishBtn.disabled = false;
                } else {
                    publishBtn.disabled = true;
                }
            });
            
            textarea.addEventListener('focus', function() {
                placeholder.style.display = 'none';
            });
            
            textarea.addEventListener('blur', function() {
                if (this.value === '') {
                    placeholder.style.display = 'block';
                }
            });
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
            privacyBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                privacyMenu.classList.toggle('active');
            });
            
            document.addEventListener('click', function() {
                privacyMenu.classList.remove('active');
            });
            
            privacyMenu.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // –í—ã–±–æ—Ä –æ–ø—Ü–∏–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
            const privacyOptions = document.querySelectorAll('.privacy-option');
            privacyOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const text = this.textContent.trim();
                    privacyBtn.querySelector('span').textContent = text;
                    privacyMenu.classList.remove('active');
                });
            });
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π (–∏–º–∏—Ç–∞—Ü–∏—è)
            const addButtons = document.querySelectorAll('.option-btn');
            addButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const type = this.id;
                    
                    // –ò–º–∏—Ç–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞
                    if (type === 'addPhoto') {
                        addAttachment('photo', '–§–æ—Ç–æ ' + (attachments.length + 1));
                    } else if (type === 'addVideo') {
                        addAttachment('video', '–í–∏–¥–µ–æ ' + (attachments.length + 1));
                    } else if (type === 'addMusic') {
                        addAttachment('music', '–ê—É–¥–∏–æ–∑–∞–ø–∏—Å—å ' + (attachments.length + 1));
                    } else if (type === 'addFile') {
                        addAttachment('file', '–î–æ–∫—É–º–µ–Ω—Ç ' + (attachments.length + 1));
                    } else if (type === 'addPoll') {
                        alert('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø—Ä–æ—Å–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–∑–∂–µ');
                    } else if (type === 'addEmoji') {
                        // –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º —Å–º–∞–π–ª–∏–∫ –≤ —Ç–µ–∫—Å—Ç
                        const emojis = ['üòä', 'üòÇ', '‚ù§Ô∏è', 'üî•', 'üëç'];
                        const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
                        textarea.value += randomEmoji;
                    }
                    
                    if (textarea.value.trim() !== '' || attachments.length > 0) {
                        publishBtn.disabled = false;
                    }
                });
            });
            
            function addAttachment(type, title) {
                const id = Date.now();
                attachments.push({id, type, title});
                
                const attachmentItem = document.createElement('div');
                attachmentItem.className = 'attachment-item';
                attachmentItem.innerHTML = `
                    <img src="https://via.placeholder.com/100x100/4a76a8/ffffff?text=${type}" alt="${title}">
                    <button class="remove-attachment" data-id="${id}">&times;</button>
                `;
                
                attachmentsPreview.appendChild(attachmentItem);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–∏—è
                attachmentItem.querySelector('.remove-attachment').addEventListener('click', function() {
                    const attachmentId = parseInt(this.getAttribute('data-id'));
                    attachments = attachments.filter(a => a.id !== attachmentId);
                    attachmentItem.remove();
                    
                    if (textarea.value.trim() === '' && attachments.length === 0) {
                        publishBtn.disabled = true;
                    }
                });
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            publishBtn.addEventListener('click', function() {
                const postText = textarea.value.trim();
                const privacy = privacyBtn.querySelector('span').textContent;
                
                if (postText === '' && attachments.length === 0) {
                    alert('–ü–æ—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!');
                    return;
                }
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                alert(`–ü–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!\n\n–¢–µ–∫—Å—Ç: ${postText || '(–±–µ–∑ —Ç–µ–∫—Å—Ç–∞)'}\n–í–ª–æ–∂–µ–Ω–∏—è: ${attachments.length}\n–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å: ${privacy}`);
                
                // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                textarea.value = '';
                attachments = [];
                attachmentsPreview.innerHTML = '';
                publishBtn.disabled = true;
                placeholder.style.display = 'block';
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã
            document.querySelector('.cancel-btn').addEventListener('click', function() {
                if (textarea.value.trim() !== '' || attachments.length > 0) {
                    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞?')) {
                        textarea.value = '';
                        attachments = [];
                        attachmentsPreview.innerHTML = '';
                        publishBtn.disabled = true;
                        placeholder.style.display = 'block';
                    }
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
            document.querySelector('.close-btn').addEventListener('click', function() {
                if (textarea.value.trim() !== '' || attachments.length > 0) {
                    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É? –í—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.')) {
                        textarea.value = '';
                        attachments = [];
                        attachmentsPreview.innerHTML = '';
                        publishBtn.disabled = true;
                        placeholder.style.display = 'block';
                    }
                } else {
                    textarea.value = '';
                    attachments = [];
                    attachmentsPreview.innerHTML = '';
                    publishBtn.disabled = true;
                    placeholder.style.display = 'block';
                }
            });
        });
    </script>
</body>
</html>